commands:

# ======== ACTIVE WINDOW / FOCUS / TYPE ========
- id: CMD_GET_ACTIVE_WINDOW
  intents: ["какое активное окно", "активное окно", "active window", "проверь активное окно"]
  description_short: "Показывает заголовок и процесс активного окна."
  execute:
    lang: python
    script: |
      from core.window_manager import get_active_window_info
      info = get_active_window_info()
      print(f"ACTIVE_WINDOW title=\"{info.get('title','')}\" process=\"{info.get('process','')}\" pid={info.get('pid')} hwnd={info.get('hwnd')}")
  verify:
    lang: python
    script: |
      print("OK")
  success:
    type: custom

- id: CMD_VERIFY_ACTIVE_WINDOW_CONTAINS
  intents: ["проверь что активное окно содержит *", "active window contains *"]
  description_short: "Проверяет что заголовок активного окна содержит текст."
  params:
    - name: text
      from_user: true
  execute:
    lang: python
    script: |
      from core.window_manager import get_active_window_info, log_verify
      target = "{{text}}".lower()
      info = get_active_window_info()
      title = (info.get("title") or "").lower()
      ok = target in title
      log_verify(ok, f"title=\"{info.get('title','')}\" target=\"{target}\"")
      if ok:
        print("OK: active window contains", target)
      else:
        raise RuntimeError(f"Active window mismatch: '{title}' not contains '{target}'")
  verify:
    lang: python
    script: |
      print("OK")
  success:
    type: custom

- id: CMD_FOCUS_WINDOW_TITLE_CONTAINS
  intents: ["сфокусируй окно *", "фокус окна *", "активируй окно *", "focus window *"]
  description_short: "Фокусирует окно по части заголовка."
  params:
    - name: text
      from_user: true
  execute:
    lang: python
    script: |
      from core.window_manager import ensure_focus, get_active_window_info
      text = "{{text}}"
      ok = ensure_focus({"title_contains": text})
      if not ok:
        raise RuntimeError("Window not found")
      info = get_active_window_info()
      print(f"OK: focused title=\"{info.get('title','')}\"")
  verify:
    lang: python
    script: |
      from core.window_manager import get_active_window_info, log_verify
      target = "{{text}}".lower()
      info = get_active_window_info()
      title = (info.get("title") or "").lower()
      ok = target in title
      log_verify(ok, f"title=\"{info.get('title','')}\" target=\"{target}\"")
      if ok:
        print("OK")
      else:
        raise RuntimeError("Active window mismatch")
  success:
    type: custom

- id: CMD_FOCUS_PROCESS
  intents: ["сфокусируй процесс *", "фокус процесса *", "focus process *"]
  description_short: "Фокусирует окно по имени процесса."
  params:
    - name: process_name
      from_user: true
  execute:
    lang: python
    script: |
      from core.window_manager import ensure_focus, get_active_window_info
      process = "{{process_name}}"
      ok = ensure_focus({"process": process})
      if not ok:
        raise RuntimeError("Process window not found")
      info = get_active_window_info()
      print(f"OK: focused process=\"{info.get('process','')}\"")
  verify:
    lang: python
    script: |
      from core.window_manager import get_active_window_info, log_verify
      target = "{{process_name}}".lower()
      info = get_active_window_info()
      process_name = (info.get("process") or "").lower()
      ok = target in process_name
      log_verify(ok, f"process=\"{info.get('process','')}\" target=\"{target}\"")
      if ok:
        print("OK")
      else:
        raise RuntimeError("Process mismatch")
  success:
    type: custom

- id: CMD_CLICK_CENTER
  intents: ["кликни по центру", "кликни в центр", "click center", "кликни центр активного окна"]
  description_short: "Клик по центру активного окна."
  execute:
    lang: python
    script: |
      from core.window_manager import click_center_active_window
      click_center_active_window()
      print("OK")
  verify: {lang: python, script: "print('OK')"}
  success: {type: custom}

- id: CMD_TYPE_ACTIVE_TEXT
  intents: ["напиши *", "впиши *", "введи *", "пиши *", "в активное поле *"]
  description_short: "Печатает текст в активное поле/окно."
  params:
    - name: text
      from_user: true
  execute:
    lang: python
    script: |
      import time
      from core.window_manager import get_active_window_info, type_text
      text = "{{text}}"
      info = get_active_window_info()
      if not info.get("hwnd"):
        raise RuntimeError("No active window")
      time.sleep(0.1)
      type_text(text, interval=0.01)
      print("OK: typed")
  verify:
    lang: python
    script: |
      from core.window_manager import get_active_window_info
      info = get_active_window_info()
      print("OK: active_window=" + (info.get("title") or "NONE"))
  success:
    type: custom

- id: CMD_PRESS_ENTER
  intents: ["нажми enter", "enter", "нажми ввод"]
  description_short: "Нажимает Enter."
  execute:
    lang: python
    script: |
      from core.window_manager import press_key
      press_key("enter")
      print("OK")
  verify: {lang: python, script: "print('OK')"}
  success: {type: custom}

- id: CMD_PRESS_ESC
  intents: ["нажми escape", "esc", "закрой меню"]
  description_short: "Нажимает Escape."
  execute:
    lang: python
    script: |
      from core.window_manager import press_key
      press_key("esc")
      print("OK")
  verify: {lang: python, script: "print('OK')"}
  success: {type: custom}

# ======== CLIPBOARD ========
- id: CMD_COPY
  intents: ["копируй", "скопируй", "копировать"]
  description_short: "Ctrl+C (копировать выделенное)."
  execute:
    lang: python
    script: |
      import pyautogui
      pyautogui.hotkey("ctrl","c")
      print("OK: copy")
  verify: {lang: python, script: "print('OK')"}
  success: {type: custom}

- id: CMD_PASTE
  intents: ["вставь", "вставить", "paste"]
  description_short: "Ctrl+V (вставить)."
  execute:
    lang: python
    script: |
      import pyautogui
      pyautogui.hotkey("ctrl","v")
      print("OK: paste")
  verify: {lang: python, script: "print('OK')"}
  success: {type: custom}

- id: CMD_CUT
  intents: ["вырежи", "вырезать", "cut"]
  description_short: "Ctrl+X (вырезать)."
  execute:
    lang: python
    script: |
      import pyautogui
      pyautogui.hotkey("ctrl","x")
      print("OK: cut")
  verify: {lang: python, script: "print('OK')"}
  success: {type: custom}

- id: CMD_SELECT_ALL
  intents: ["выдели все", "выделить все", "select all"]
  description_short: "Ctrl+A (выделить всё)."
  execute:
    lang: python
    script: |
      import pyautogui
      pyautogui.hotkey("ctrl","a")
      print("OK: select all")
  verify: {lang: python, script: "print('OK')"}
  success: {type: custom}

- id: CMD_PASTE_TEXT
  intents: ["вставь текст *", "вклей *"]
  description_short: "Копирует текст в буфер и вставляет (стабильно для длинного)."
  params:
    - name: text
      from_user: true
  execute:
    lang: python
    script: |
      import time
      import pyautogui
      import pyperclip
      text = "{{text}}"
      pyperclip.copy(text)
      time.sleep(0.05)
      pyautogui.hotkey("ctrl","v")
      print("OK: pasted text")
  verify: {lang: python, script: "print('OK')"}
  success: {type: custom}

# ======== BROWSER / TABS / YOUTUBE ========
- id: CMD_BROWSER_CTRL_L
  intents: ["в адресную строку", "адресная строка", "ctrl l"]
  description_short: "Фокус адресной строки браузера (Ctrl+L)."
  execute:
    lang: python
    script: |
      from core.window_manager import press_hotkey
      press_hotkey("ctrl", "l")
      print("OK")
  verify: {lang: python, script: "print('OK')"}
  success: {type: custom}

- id: CMD_BROWSER_OPEN_IN_ADDRESS_BAR
  intents: ["в адресную строку введи * и открой", "в адресной строке введи * и открой"]
  description_short: "Вводит адрес в адресную строку и открывает."
  params:
    - name: text
      from_user: true
  execute:
    lang: python
    script: |
      import time
      from core.window_manager import paste_text, press_hotkey, press_key
      text = "{{text}}"
      press_hotkey("ctrl", "l")
      time.sleep(0.05)
      paste_text(text)
      press_key("enter")
      print("OK")
  verify: {lang: python, script: "print('OK')"}
  success: {type: custom}

- id: CMD_BROWSER_CLOSE_TAB
  intents: ["закрой вкладку", "закрой текущую вкладку", "close tab"]
  description_short: "Закрывает активную вкладку (Ctrl+W)."
  execute:
    lang: python
    script: |
      from core.window_manager import press_hotkey
      press_hotkey("ctrl", "w")
      print("OK")
  verify: {lang: python, script: "print('OK')"}
  success: {type: custom}

- id: CMD_BROWSER_NEXT_TAB
  intents: ["следующая вкладка", "переключи вкладку вперед", "next tab"]
  description_short: "Переключает на следующую вкладку (Ctrl+Tab)."
  execute:
    lang: python
    script: |
      from core.window_manager import press_hotkey
      press_hotkey("ctrl", "tab")
      print("OK")
  verify: {lang: python, script: "print('OK')"}
  success: {type: custom}

- id: CMD_BROWSER_PREV_TAB
  intents: ["предыдущая вкладка", "переключи вкладку назад", "prev tab"]
  description_short: "Переключает на предыдущую вкладку (Ctrl+Shift+Tab)."
  execute:
    lang: python
    script: |
      from core.window_manager import press_hotkey
      press_hotkey("ctrl", "shift", "tab")
      print("OK")
  verify: {lang: python, script: "print('OK')"}
  success: {type: custom}

- id: CMD_BROWSER_SEARCH
  intents: ["найди в гугле *", "погугли *", "поиск *"]
  description_short: "Ищет запрос через адресную строку браузера."
  params:
    - name: query
      from_user: true
  execute:
    lang: python
    script: |
      import time
      from core.window_manager import paste_text, press_hotkey, press_key
      query = "{{query}}"
      press_hotkey("ctrl", "l")
      time.sleep(0.05)
      paste_text(query)
      press_key("enter")
      print("OK")
  verify: {lang: python, script: "print('OK')"}
  success: {type: custom}

- id: CMD_YT_TOGGLE_PLAY
  intents: ["поставь на паузу", "пауза", "останови видео", "play", "pause", "продолжи видео", "продолжи"]
  description_short: "YouTube play/pause (K) с фокусом и кликом по плееру."
  execute:
    lang: python
    script: |
      import time
      from core.window_manager import click_center_active_window, ensure_focus, press_key

      focused = False
      if ensure_focus({"title_contains": "YouTube"}):
        focused = True
      if not focused:
        for name in ("chrome.exe", "msedge.exe", "firefox.exe"):
          if ensure_focus({"process": name}):
            focused = True
            break
      if not focused:
        raise RuntimeError("Не нашёл окно браузера, открой YouTube и повтори.")

      time.sleep(0.05)
      click_center_active_window()
      time.sleep(0.05)
      press_key("k")
      print("OK")
  verify: {lang: python, script: "print('OK')"}
  success: {type: custom}

- id: CMD_YT_BACK_SECONDS
  intents: ["перемотай назад *", "отмотай *", "перемотай на * назад", "назад на *"]
  description_short: "YouTube назад на N секунд (J)."
  params:
    - name: seconds
      from_user: true
  execute:
    lang: python
    script: |
      import math
      import re
      import time
      from core.window_manager import click_center_active_window, ensure_focus, press_key

      raw = "{{seconds}}"
      match = re.search(r"(\\d+)", raw)
      seconds = int(match.group(1)) if match else 10
      presses = max(1, int(math.ceil(seconds / 10)))

      focused = False
      if ensure_focus({"title_contains": "YouTube"}):
        focused = True
      if not focused:
        for name in ("chrome.exe", "msedge.exe", "firefox.exe"):
          if ensure_focus({"process": name}):
            focused = True
            break
      if not focused:
        raise RuntimeError("Не нашёл окно браузера, открой YouTube и повтори.")

      time.sleep(0.05)
      click_center_active_window()
      time.sleep(0.05)
      for _ in range(presses):
        press_key("j")
      print(f"OK: back {presses}")
  verify: {lang: python, script: "print('OK')"}
  success: {type: custom}

- id: CMD_YT_FORWARD_SECONDS
  intents: ["перемотай вперед *", "перемотай вперёд *", "промотай *", "вперёд на *"]
  description_short: "YouTube вперед на N секунд (L)."
  params:
    - name: seconds
      from_user: true
  execute:
    lang: python
    script: |
      import math
      import re
      import time
      from core.window_manager import click_center_active_window, ensure_focus, press_key

      raw = "{{seconds}}"
      match = re.search(r"(\\d+)", raw)
      seconds = int(match.group(1)) if match else 10
      presses = max(1, int(math.ceil(seconds / 10)))

      focused = False
      if ensure_focus({"title_contains": "YouTube"}):
        focused = True
      if not focused:
        for name in ("chrome.exe", "msedge.exe", "firefox.exe"):
          if ensure_focus({"process": name}):
            focused = True
            break
      if not focused:
        raise RuntimeError("Не нашёл окно браузера, открой YouTube и повтори.")

      time.sleep(0.05)
      click_center_active_window()
      time.sleep(0.05)
      for _ in range(presses):
        press_key("l")
      print(f"OK: forward {presses}")
  verify: {lang: python, script: "print('OK')"}
  success: {type: custom}

# ======== WINDOW MANAGEMENT ========
- id: CMD_CLOSE_ACTIVE_WINDOW
  intents: ["закрой окно", "закрой активное окно", "закрой текущее"]
  description_short: "Alt+F4 закрывает активное окно."
  execute:
    lang: python
    script: |
      import pyautogui
      pyautogui.hotkey("alt","f4")
      print("OK: alt+f4")
  verify: {lang: python, script: "print('OK')"}
  success: {type: custom}

- id: CMD_MINIMIZE_ACTIVE_WINDOW
  intents: ["сверни окно", "сверни активное"]
  description_short: "Win+Down сворачивает активное окно."
  execute:
    lang: python
    script: |
      import pyautogui
      pyautogui.hotkey("win","down")
      print("OK")
  verify: {lang: python, script: "print('OK')"}
  success: {type: custom}

- id: CMD_MAXIMIZE_ACTIVE_WINDOW
  intents: ["разверни окно", "на весь экран окно", "увеличь окно"]
  description_short: "Win+Up разворачивает активное окно."
  execute:
    lang: python
    script: |
      import pyautogui
      pyautogui.hotkey("win","up")
      print("OK")
  verify: {lang: python, script: "print('OK')"}
  success: {type: custom}

- id: CMD_SHOW_DESKTOP
  intents: ["покажи рабочий стол", "сверни все окна", "win d"]
  description_short: "Win+D показать рабочий стол."
  execute:
    lang: python
    script: |
      import pyautogui
      pyautogui.hotkey("win","d")
      print("OK")
  verify: {lang: python, script: "print('OK')"}
  success: {type: custom}

- id: CMD_ALT_TAB
  intents: ["переключи окно", "следующее окно", "alt tab"]
  description_short: "Alt+Tab переключает окно."
  execute:
    lang: python
    script: |
      import pyautogui
      pyautogui.hotkey("alt","tab")
      print("OK")
  verify: {lang: python, script: "print('OK')"}
  success: {type: custom}

# ======== APPS ========
- id: CMD_FOCUS_NOTEPAD
  intents: ["сфокусируй блокнот", "переключись на блокнот", "focus notepad"]
  description_short: "Активирует окно Блокнота (если уже открыто)."
  execute:
    lang: python
    script: |
      from core.window_manager import click_center_active_window, ensure_focus
      ok = ensure_focus({"process": "notepad.exe"})
      if not ok:
        ok = ensure_focus({"title_contains": "Блокнот"})
      if not ok:
        ok = ensure_focus({"title_contains": "Notepad"})
      if not ok:
        raise RuntimeError("Notepad window not found")
      click_center_active_window()
      print("OK: focused notepad")
  verify:
    lang: python
    script: |
      from core.window_manager import get_active_window_info, log_verify
      info = get_active_window_info()
      title = (info.get("title") or "").lower()
      ok = "блокнот" in title or "notepad" in title
      log_verify(ok, f"title=\"{info.get('title','')}\"")
      if ok:
        print("OK")
      else:
        raise RuntimeError("Notepad is not active")
  success:
    type: custom
  state_update:
    active_app: "notepad"

- id: CMD_TYPE_IN_NOTEPAD
  intents: ["в блокноте *", "в блокнот *", "в блокноте напиши *", "в блокнот напиши *"]
  description_short: "Пишет текст именно в Блокнот (активирует окно и печатает)."
  params:
    - name: text
      from_user: true
  execute:
    lang: python
    script: |
      import time
      from core.window_manager import click_center_active_window, ensure_focus, type_text
      text = "{{text}}"

      ok = ensure_focus({"process": "notepad.exe"})
      if not ok:
        ok = ensure_focus({"title_contains": "Блокнот"})
      if not ok:
        ok = ensure_focus({"title_contains": "Notepad"})
      if not ok:
        raise RuntimeError("Notepad window not found")

      time.sleep(0.1)
      click_center_active_window()
      time.sleep(0.05)
      type_text(text, interval=0.01)
      print("OK: typed into notepad")
  verify:
    lang: python
    script: |
      from core.window_manager import get_active_window_info, log_verify
      info = get_active_window_info()
      title = (info.get("title") or "").lower()
      ok = "блокнот" in title or "notepad" in title
      log_verify(ok, f"title=\"{info.get('title','')}\"")
      if ok:
        print("OK")
      else:
        raise RuntimeError("Notepad is not active")
  success:
    type: custom
  state_update:
    active_app: "notepad"


- id: CMD_CLOSE_NOTEPAD
  intents: ["закрой блокнот", "убей блокнот"]
  description_short: "Закрывает Блокнот."
  execute: {lang: powershell, script: "Stop-Process -Name notepad -ErrorAction SilentlyContinue"}
  verify: {lang: powershell, script: "if (Get-Process notepad -ErrorAction SilentlyContinue) { exit 1 } else { 'OK' }"}
  success: {type: custom}

- id: CMD_OPEN_CALCULATOR
  intents: ["открой калькулятор", "запусти калькулятор", "calculator"]
  description_short: "Открывает калькулятор."
  execute: {lang: powershell, script: "Start-Process calc.exe"}
  verify: {lang: powershell, script: "Get-Process Calculator -ErrorAction SilentlyContinue | Out-String"}
  success: {type: custom}
  state_update:
    active_app: "calc"

- id: CMD_OPEN_EXPLORER
  intents: ["открой проводник", "открой папки", "explorer"]
  description_short: "Открывает Проводник."
  execute: {lang: powershell, script: "Start-Process explorer.exe"}
  verify: {lang: powershell, script: "Get-Process explorer -ErrorAction SilentlyContinue | Out-String"}
  success: {type: process_running, process_name: explorer}

- id: CMD_OPEN_APP_SEARCH
  intents: ["открой *", "запусти *", "включи *"]
  description_short: "Открывает приложение через Windows Search с вставкой из буфера."
  params:
    - name: app_name
      from_user: true
  execute:
    lang: python
    script: |
      from core.app_normalizer import normalize_app_query
      from core.state import set_pending_app
      from core.windows_search import windows_search_open
      raw = "{{app_name}}"
      normalized = normalize_app_query(raw)
      print(f'[APP_OPEN] raw="{raw}"')
      print(f'[APP_OPEN] normalized="{normalized}"')
      print('[APP_OPEN] strategy="windows_search"')
      set_pending_app(raw, normalized)
      windows_search_open(normalized)
  verify:
    lang: python
    script: |
      from core.window_manager import get_active_window_info
      info = get_active_window_info()
      print(f"ACTIVE_WINDOW title=\"{info.get('title','')}\" process=\"{info.get('process','')}\"")
      print("OK")
  success:
    type: custom

# ======== FILES SAFE ========
- id: CMD_CREATE_TXT_DESKTOP
  intents: ["создай txt *", "создай текстовый файл *", "создай файл ткст *"]
  description_short: "Создаёт txt на Desktop и записывает текст."
  params:
    - name: content
      from_user: true
    - name: filename
      default: "note.txt"
  execute:
    lang: powershell
    script: |
      $desktop = [Environment]::GetFolderPath('Desktop')
      $path = Join-Path $desktop "{{filename}}"
      "{{content}}" | Set-Content -Path $path -Encoding UTF8
      Write-Host "SAVED: $path"
  verify:
    lang: powershell
    script: |
      $desktop = [Environment]::GetFolderPath('Desktop')
      $path = Join-Path $desktop "{{filename}}"
      if (Test-Path $path) { "OK" } else { exit 1 }
  success: {type: file_exists}
  state_update:
    active_file: "{{desktop}}\\{{filename}}"

- id: CMD_CREATE_DOCX_DESKTOP
  intents: ["создай ворд файл *", "создай docx *", "создай документ word *", "создай документ ворд *"]
  description_short: "Создаёт настоящий .docx на Desktop через python-docx."
  params:
    - name: content
      from_user: true
    - name: filename
      default: "document.docx"
  execute:
    lang: python
    script: |
      from pathlib import Path
      from docx import Document
      desktop = Path.home() / "Desktop"
      path = desktop / "{{filename}}"
      doc = Document()
      doc.add_paragraph("{{content}}")
      doc.save(path)
      print(f"SAVED: {path}")
  verify:
    lang: python
    script: |
      from pathlib import Path
      p = Path.home() / "Desktop" / "{{filename}}"
      print("OK" if p.exists() else "FAIL")
      if not p.exists(): raise RuntimeError("docx not found")
  success: {type: file_exists}
  state_update:
    active_file: "{{desktop}}\\{{filename}}"

# ======== BROWSER / SEARCH ========
- id: CMD_OPEN_URL
  intents: ["открой ссылку *", "открой сайт *", "перейди на *", "open url *"]
  description_short: "Открывает URL в браузере."
  params: [{name: url, from_user: true}]
  execute: {lang: powershell, script: "Start-Process \"{{url}}\""}
  verify: {lang: powershell, script: "OK"}
  success: {type: none}
  state_update:
    active_url: "{{url}}"

- id: CMD_GOOGLE_SEARCH
  intents: ["погугли *", "найди в гугле *", "google *", "поиск *", "найди * в гугле"]
  description_short: "Открывает Google поиск по запросу."
  params: [{name: query, from_user: true}]
  execute:
    lang: powershell
    script: |
      $q=[uri]::EscapeDataString("{{query}}")
      Start-Process "https://www.google.com/search?q=$q"
  verify: {lang: powershell, script: "OK"}
  success: {type: none}

- id: CMD_YOUTUBE_OPEN
  intents: ["открой ютуб", "youtube", "youtube.com", "открой youtube", "ютуб открой"]
  description_short: "Открывает YouTube."
  execute: {lang: powershell, script: "Start-Process \"https://www.youtube.com/\""}
  verify: {lang: powershell, script: "OK"}
  success: {type: none}
  state_update:
    active_url: "https://www.youtube.com/"

- id: CMD_YOUTUBE_SEARCH
  intents:
    [
      "найди на ютубе *",
      "поиск ютуб *",
      "youtube search *",
      "открой ютуб и найди *",
      "найди видео * на ютубе",
      "ютуб найди *",
    ]
  description_short: "Открывает результаты поиска YouTube."
  params: [{name: query, from_user: true}]
  execute:
    lang: powershell
    script: |
      $q=[uri]::EscapeDataString("{{query}}")
      Start-Process "https://www.youtube.com/results?search_query=$q"
  verify: {lang: powershell, script: "OK"}
  success: {type: none}
  state_update:
    active_url: "https://www.youtube.com/results?search_query={{query}}"

- id: CMD_BROWSER_NEW_TAB
  intents: ["новая вкладка", "открой новую вкладку", "ctrl t"]
  description_short: "Ctrl+T новая вкладка в браузере."
  execute:
    lang: python
    script: |
      import pyautogui
      pyautogui.hotkey("ctrl","t")
      print("OK")
  verify: {lang: python, script: "print('OK')"}
  success: {type: custom}

- id: CMD_BROWSER_CLOSE_TAB
  intents: ["закрой вкладку", "ctrl w", "close tab"]
  description_short: "Ctrl+W закрывает вкладку."
  execute:
    lang: python
    script: |
      import pyautogui
      pyautogui.hotkey("ctrl","w")
      print("OK")
  verify: {lang: python, script: "print('OK')"}
  success: {type: custom}

- id: CMD_BROWSER_REOPEN_TAB
  intents: ["верни вкладку", "открой закрытую вкладку", "ctrl shift t"]
  description_short: "Ctrl+Shift+T вернуть закрытую вкладку."
  execute:
    lang: python
    script: |
      import pyautogui
      pyautogui.hotkey("ctrl","shift","t")
      print("OK")
  verify: {lang: python, script: "print('OK')"}
  success: {type: custom}

- id: CMD_BROWSER_ADDRESS_BAR
  intents: ["в адресную строку", "открой адресную строку", "ctrl l"]
  description_short: "Ctrl+L фокус на адресную строку."
  execute:
    lang: python
    script: |
      import pyautogui
      pyautogui.hotkey("ctrl","l")
      print("OK")
  verify: {lang: python, script: "print('OK')"}
  success: {type: custom}

# ======== SMART “FIND ON PAGE” ========
- id: CMD_FIND_ON_PAGE
  intents: ["найди на странице *", "ctrl f *", "поиск по странице *"]
  description_short: "Ctrl+F поиск по странице + ввод текста."
  params: [{name: text, from_user: true}]
  execute:
    lang: python
    script: |
      import time
      import pyautogui
      text="{{text}}"
      pyautogui.hotkey("ctrl","f")
      time.sleep(0.1)
      pyautogui.typewrite(text, interval=0.01)
      pyautogui.press("enter")
      print("OK: find on page")
  verify: {lang: python, script: "print('OK')"}
  success: {type: custom}

# ======== YOUTUBE HOTKEYS ========
- id: CMD_YT_PLAY_PAUSE
  intents: ["пауза", "поставь на паузу", "продолжи", "play pause"]
  description_short: "YouTube: K пауза/плей."
  execute: {lang: python, script: "import pyautogui; pyautogui.press('k'); print('OK')"}
  verify: {lang: python, script: "print('OK')"}
  success: {type: custom}

- id: CMD_YT_FORWARD_10
  intents: ["вперед 10", "перемотай вперед", "forward 10"]
  description_short: "YouTube: L вперед 10 сек."
  execute: {lang: python, script: "import pyautogui; pyautogui.press('l'); print('OK')"}
  verify: {lang: python, script: "print('OK')"}
  success: {type: custom}

- id: CMD_YT_BACK_10
  intents: ["назад 10", "перемотай назад", "back 10"]
  description_short: "YouTube: J назад 10 сек."
  execute: {lang: python, script: "import pyautogui; pyautogui.press('j'); print('OK')"}
  verify: {lang: python, script: "print('OK')"}
  success: {type: custom}

- id: CMD_YT_MUTE
  intents: ["выключи звук", "mute", "без звука"]
  description_short: "YouTube: M mute."
  execute: {lang: python, script: "import pyautogui; pyautogui.press('m'); print('OK')"}
  verify: {lang: python, script: "print('OK')"}
  success: {type: custom}

- id: CMD_YT_FULLSCREEN
  intents: ["полный экран", "fullscreen", "фуллскрин"]
  description_short: "YouTube: F fullscreen."
  execute: {lang: python, script: "import pyautogui; pyautogui.press('f'); print('OK')"}
  verify: {lang: python, script: "print('OK')"}
  success: {type: custom}

# ======== BULK / LOOP HELPERS ========
- id: CMD_PRESS_CTRL_W_TIMES
  intents: ["закрой * вкладок", "закрой вкладки * раз", "ctrl w * раз"]
  description_short: "Нажимает Ctrl+W N раз."
  params: [{name: times, from_user: true}]
  execute:
    lang: python
    script: |
      import time, pyautogui
      n=int("{{times}}")
      for i in range(n):
        pyautogui.hotkey("ctrl","w")
        time.sleep(0.15)
      print("OK: closed tabs", n)
  verify: {lang: python, script: "print('OK')"}
  success: {type: custom}

# ----------------------------------------
# Конец библиотеки (можно дополнять дальше)
# ----------------------------------------
